if( (NOT IFC2X3_FOUND) OR (NOT IFC2X3_SDK_VERSION VERSION_EQUAL @IFC2X3_SDK_VERSION@) )

find_package(Step @Step_VERSION_FULL@ REQUIRED)

if(NOT IFC2X3_ROOT)
    if(NOT IFC2X3_DIR)
        set(IFC2X3_DIR ${CMAKE_CURRENT_LIST_DIR})
    endif()
    if(UNIX)
        set(IFC2X3_ROOT ${IFC2X3_DIR}/../..)
    else()
        set(IFC2X3_ROOT ${IFC2X3_DIR})
    endif()
endif()

get_filename_component(IFC2X3_ROOT ${IFC2X3_ROOT} ABSOLUTE)

SET(IFC2X3_SDK_VERSION_MAJOR @IFC2X3_SDK_VERSION_MAJOR@ CACHE STRING "Version" FORCE)
SET(IFC2X3_SDK_VERSION_MINOR @IFC2X3_SDK_VERSION_MINOR@ CACHE STRING "Version" FORCE)
SET(IFC2X3_SDK_VERSION_PATCH @IFC2X3_SDK_VERSION_PATCH@ CACHE STRING "Version" FORCE)
SET(IFC2X3_SDK_SOVERSION @IFC2X3_SDK_SOVERSION@ CACHE STRING "Version" FORCE)

SET(IFC2X3_SDK_VERSION @IFC2X3_SDK_VERSION@ CACHE STRING "Version" FORCE)
SET(IFC2X3_SDK_VERSION_FULL @IFC2X3_SDK_VERSION_FULL@ CACHE STRING "Full Version" FORCE)


find_path(IFC2X3_INCLUDE_DIR NAME ifc2x3/ExpressDataSet.h PATHS ${IFC2X3_ROOT}/include NO_DEFAULT_PATH)
find_path(IFC2X3_INCLUDE_DIR NAME ifc2x3/ExpressDataSet.h)

set(IFC2X3_INCLUDE_DIRS ${STEP_INCLUDE_DIR} ${IFC2X3_INCLUDE_DIR})

find_library(IFC2X3_LIBRARY_DEBUG
             NAMES ifc2x3@CMAKE_DEBUG_POSTFIX@
             PATHS ${IFC2X3_ROOT}/lib@LIB_POSTFIX@
             NO_DEFAULT_PATH)
find_library(IFC2X3_LIBRARY_DEBUG
             NAMES ifc2x3@CMAKE_DEBUG_POSTFIX@ )


find_library(IFC2X3_LIBRARY
             NAMES ifc2x3 
             PATHS ${IFC2X3_ROOT}/lib@LIB_POSTFIX@
             NO_DEFAULT_PATH)
find_library(IFC2X3_LIBRARY
             NAMES ifc2x3)

if(IFC2X3_LIBRARY_DEBUG)
    if (IFC2X3_LIBRARY)
        set(IFC2X3_LIBRARIES optimized ${IFC2X3_LIBRARY} debug ${IFC2X3_LIBRARY_DEBUG})
    else()
        set(IFC2X3_LIBRARIES ${IFC2X3_LIBRARY_DEBUG})
    endif()
else()
    set(IFC2X3_LIBRARIES ${IFC2X3_LIBRARY})
endif()

set(IFC2X3_LIBRARIES ${STEP_LIBRARIES} ${IFC2X3_LIBRARIES})

include(FindPackageHandleStandardArgs)

FIND_PACKAGE_HANDLE_STANDARD_ARGS(IFC2X3
                                  REQUIRED_VARS IFC2X3_LIBRARIES IFC2X3_INCLUDE_DIR
                                  VERSION_VAR IFC2X3_SDK_VERSION_FULL)

endif()
